**BCM Engineering Department Coding Guidelines**

---

### **1. Coding Standards and Best Practices**

#### **JavaScript Guidelines**
- **Style Guide**: Follow the [Airbnb JavaScript Style Guide](https://github.com/airbnb/javascript) as the baseline for consistent code styling.
- **Variable Naming**:
  - Use `camelCase` for variable and function names.
  - Use `PascalCase` for class names.
  - Use `UPPER_CASE` for constants.
- **Modern JavaScript**:
  - Use ES6+ features like `let`, `const`, arrow functions, destructuring, and template literals.
  - Prefer `const` over `let` where variables do not change.
- **Code Formatting**:
  - Enforce consistent code formatting using Prettier with the team’s predefined settings.
- **Error Handling**:
  - Always handle potential errors in promises using `.catch()` or `try...catch` blocks.
- **Modules**:
  - Use ES Modules (`import`/`export`) for better maintainability and cleaner code.
- **Semantic JavaScript**:
  - Use descriptive variable names that clearly convey their purpose.
  - Write self-documenting code by grouping related functionality into reusable modules or components.

#### **PHP Guidelines for WordPress**
- **Coding Standards**:
  - Adhere to the [WordPress PHP Coding Standards](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/php/).
- **Naming Conventions**:
  - Use `snake_case` for PHP variables and function names.
  - Prefix all custom functions, classes, and variables to avoid naming collisions (e.g., `bcm_custom_function_name`).
- **Core Functions**:
  - Always prefer WordPress core functions for common tasks (e.g., `esc_html()`, `wp_enqueue_script()`).
- **Strict Comparisons**:
  - Use `===` and `!==` to avoid unexpected type coercions.
- **Code Organization**:
  - Use classes and namespaces for structuring code in larger projects.
- **Semantic Markup**:
  - Generate HTML with meaningful and accessible tags (e.g., `<header>`, `<main>`, `<footer>`, `<section>`, `<article>`).
  - Include ARIA roles where applicable to improve accessibility.

---

### **2. Performance Optimization**

#### **JavaScript Performance**
- **DOM Manipulations**:
  - Batch updates to the DOM to reduce layout thrashing.
  - Avoid querying the DOM repeatedly; store references in variables.
- **Asynchronous Loading**:
  - Use `async` or `defer` attributes for script tags to avoid blocking rendering.
  - Implement lazy loading for images and other assets where appropriate.
- **Code Splitting**:
  - Split large JavaScript files into smaller modules.
  - Use bundlers like Webpack or Rollup for optimization.
- **Semantic Structure in Scripts**:
  - Use data attributes (`data-*`) to bind JavaScript functionality to HTML elements.

#### **PHP and WordPress Performance**
- **Caching**:
  - Use WordPress’s Transients API or object caching mechanisms.
  - Leverage full-page caching plugins where applicable.
- **Database Queries**:
  - Avoid direct database queries; use `WP_Query` and related WordPress functions.
  - Use query caching where feasible.
- **Plugin Management**:
  - Limit the number of active plugins and avoid redundancy.
- **Minimizing Overhead**:
  - Optimize enqueued scripts and styles to ensure only necessary files are loaded per page.

---

### **3. Security Practices**

#### **JavaScript Security**
- **Avoid Inline Scripts**:
  - Use `wp_localize_script()` or `wp_add_inline_script()` to pass data securely to JavaScript.
- **Sanitize Inputs**:
  - Validate and sanitize all data coming from the server or client.

#### **PHP and WordPress Security**
- **Output Escaping**:
  - Always escape user-generated content with functions like `esc_html()`, `esc_attr()`, or `esc_url()`.
- **Nonce Verification**:
  - Use `wp_nonce_field()` for forms and verify with `check_admin_referer()`.
- **Capabilities Check**:
  - Ensure the current user has the proper permissions using `current_user_can()`.
- **SQL Injection**:
  - Avoid raw SQL queries; if necessary, use `$wpdb->prepare()`.
- **HTML and Semantic Security**:
  - Ensure that HTML generated by the server is valid, well-structured, and secure.
  - Strip disallowed tags and attributes using `wp_kses()` for user-submitted content.

---

### **4. Git Workflow and Version Control**

#### **Branching Strategy**
- Follow [Git Flow](https://nvie.com/posts/a-successful-git-branching-model/) with the following branch types:
  - `main`: Stable production-ready code.
  - `develop`: Latest development changes.
  - `feature/{feature-name}`: Individual feature branches.
  - `hotfix/{hotfix-name}`: Urgent fixes for production.

#### **Commit Messages**
- Format: `type(scope): description` (e.g., `feat(header): add mobile navigation`).
- Types: `feat`, `fix`, `chore`, `docs`, `refactor`, `test`, `style`.

#### **Pull Requests (PRs)**
- Include clear titles, linked issue numbers, and a description of changes.
- All PRs must:
  - Be reviewed by at least one team member.
  - Include unit tests for new features or fixes.

---

### **5. Testing and Quality Assurance**

#### **JavaScript Testing**
- Use [Jest](https://jestjs.io/) or [Mocha](https://mochajs.org/) for unit testing.
- Focus on critical functions, especially those handling data processing or API requests.
- Use semantic selectors in tests to ensure maintainability.

#### **PHP Testing**
- Use [PHPUnit](https://phpunit.de/) for testing PHP code.
- Write tests for functions interacting with the WordPress database or APIs.
- Set up Continuous Integration (CI) to run automated tests for every PR.
- Include integration tests for theme or plugin-specific functionality.

---

### **6. Code Review Tools and Automation**

- **Static Code Analysis**:
  - Integrate [SonarQube](https://www.sonarqube.org/) or similar tools for identifying code issues.
- **Linting**:
  - Use [ESLint](https://eslint.org/) for JavaScript.
  - Use [PHP_CodeSniffer](https://github.com/squizlabs/PHP_CodeSniffer) with the [WordPress VIP Coding Standards](https://github.com/Automattic/VIP-Coding-Standards) for PHP.
- **Automated Testing**:
  - Use [GitHub Actions](https://github.com/features/actions) for running tests and deployments.
- **Accessibility Testing**:
  - Include tools like Axe or Lighthouse to verify adherence to accessibility standards.

---

### **7. Styling Guidelines**

#### **CSS/SCSS**
- **Structure and Organization**:
  - Use the Block-Element-Modifier (BEM) methodology for class naming.
  - Structure files modularly (e.g., base, components, utilities).
- **Preprocessors**:
  - Use SCSS for maintainable and scalable styling.
  - Follow a consistent nesting limit (e.g., no more than three levels deep).
- **Variables and Mixins**:
  - Use variables for colors, fonts, and spacing to ensure consistency.
  - Create reusable mixins for common patterns (e.g., flexbox alignment).
- **Media Queries**:
  - Use mobile-first design principles and SCSS mixins for breakpoints.
- **CSS Performance**:
  - Minimize specificity by avoiding overqualified selectors.
  - Leverage CSS grid and flexbox for layouts instead of floats.

#### **Semantic Styling**
- Ensure all styles are tied to semantic HTML elements.
- Use ARIA attributes and focus styles for interactive elements (e.g., `:focus-visible`).
- Avoid inline styles; manage all styling through SCSS or theme settings.

---

### **References**
- [10up Engineering Best Practices](https://10up.github.io/Engineering-Best-Practices/)
- [WordPress PHP Coding Standards](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/php/)
- [WordPress VIP Coding Standards](https://github.com/Automattic/VIP-Coding-Standards)
- [Airbnb JavaScript Style Guide](https://github.com/airbnb/javascript)

